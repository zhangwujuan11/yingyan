{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Popupp from '@/components/Popupp.vue';\nimport Administrtab from '@/components/Administrtab.vue';\nimport http from '@/common/api/request.js';\nimport { delroot, journal } from '@/common/api/adminCenter';\nimport Foot from '@/components/Foot.vue';\nimport { Toast, MessageBox } from 'mint-ui'; // import BetterScroll from '@better-scroll/core'\n\nexport default {\n  inject: [\"reload\"],\n  data: function data() {\n    return {\n      startX: 0,\n      //滑动开始\n      endX: 0,\n      //滑动结束\n      popupVisible: false,\n      //添加设备表单是否显示\n      updata: false,\n      //设备是否添加成功\n      rootForm: {\n        'device_ip': '',\n        //设备ip\n        // 'device_id':'',//设备\n        'device_account': '',\n        //设备账号\n        'device_password': '',\n        //设备密码\n        'org_id': Number(JSON.parse(localStorage.getItem('urlUserinfor')).orgId),\n        //机构id\n        'push_url': '',\n        //推流直播地址\n        'device_type': 1,\n        //设备类型\n        'state': 1,\n        //状态\n        'device_name': '',\n        //设备名称\n        \"scope\": ''\n      },\n      device_type_name: [],\n      //设备类型名称\n      cameraList: [],\n      rules: {\n        device_name: {\n          rule: /^.+$/,\n          msg: \"设备名称不能为空\"\n        },\n        device_ip: {\n          rule: /^((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])$/,\n          msg: \"ip地址输入错误\"\n        },\n        // device_id:{\n        // \trule:/^.+$/,\n        // \tmsg:\"设备id不能为空\"\n        // },\n        // device_account:{\n        // \trule:/^.+$/,\n        // \tmsg:\"设备账号不能为空\"\n        // },\n        device_password: {\n          rule: /^.+$/,\n          msg: \"设备密码不能为空\"\n        },\n        device_type: {\n          rule: /^.+$/,\n          msg: \"设备类型不能为空\"\n        },\n        device_id: {\n          rule: /^.+$/,\n          msg: \"设备id不能为空\"\n        }\n      }\n    };\n  },\n  components: {\n    Popupp: Popupp,\n    Administrtab: Administrtab,\n    Foot: Foot\n  },\n  created: function created() {\n    var _this = this;\n\n    // 获取设备列表\n    http.$axios({\n      url: 'device/getDevices',\n      method: \"GET\",\n      params: {\n        \"org_id\": this.$store.state.userorgid\n      }\n    }).then(function (res) {\n      _this.cameraList = res.data.data;\n    });\n    this.$nextTick(function () {\n      // 获取设备类型名称\n      http.$axios({\n        url: 'https://1to2to3.cn/rds2/service/query',\n        data: {\n          \"auth\": 2,\n          \"project\": \"eagle_eye\",\n          \"table\": \"sys_device_type\",\n          \"conditions\": {\n            \"fields\": [\"device_type_name\"],\n            \"query\": {}\n          }\n        }\n      }).then(function (res) {\n        _this.device_type_name = res.data.data; // new BetterScroll('.wrapper', {\n        //    movable: true,\n        //    zoom: true,\n        // \tprobeType:2,\n        // \tclick:true\n        //  })\n      });\n    });\n  },\n  methods: {\n    // 添加设备表单\n    formRec: function formRec() {\n      this.popupVisible = true;\n    },\n    // 保存添加设备信息\n    infPost: function infPost() {\n      var _this2 = this;\n\n      if (!this.validate('device_name')) return;\n      if (!this.validate('device_ip')) return;\n      if (!this.validate('device_id')) return; // if( !this.validate('device_account') ) return;\n\n      if (!this.validate('device_password')) return;\n      if (!this.validate('device_type')) return;\n      this.rootForm.device_id = Number(this.rootForm.device_id);\n      http.$axios({\n        url: '/device',\n        data: this.rootForm\n      }).then(function (res) {\n        Toast(res.data.result);\n        _this2.popupVisible = false;\n        _this2.updata = true;\n        journal({\n          \"appName\": \"eagle\",\n          \"methodName\": \"添加设备\",\n          \"methodRemark\": \"添加了\" + _this2.rootForm.device_name + \"设备\",\n          \"optReqParam\": \"\",\n          \"optResInfo\": res.data.result,\n          \"reqUrl\": \"\"\n        }).then(function (res) {\n          console.log(res);\n        });\n\n        _this2.reload();\n      }).catch(function () {\n        Toast('添加失败，请重试');\n      });\n    },\n    //验证信息提示\n    validate: function validate(key) {\n      var bool = true;\n\n      if (!this.rules[key].rule.test(this.rootForm[key])) {\n        //提示信息\n        Toast(this.rules[key].msg);\n        bool = false;\n        return false;\n      }\n\n      return bool;\n    },\n    // 关闭蒙尘\n    changVisible: function changVisible() {\n      this.popupVisible = false;\n    },\n    // 向左滑动出现删除按钮时，点击商品信息区域取消删除\n    oneself: function oneself() {\n      if (this.checkSlide()) {\n        this.restSlide();\n      }\n    },\n    //滑动开始\n    touchStart: function touchStart(e) {\n      // 记录初始位置\n      this.startX = e.touches[0].clientX;\n    },\n    //滑动结束\n    touchEnd: function touchEnd(e) {\n      // 当前滑动的父级元素\n      var parentElement = e.currentTarget.parentElement; // 记录结束位置\n\n      this.endX = e.changedTouches[0].clientX; // 左滑大于30距离删除出现\n\n      if (parentElement.dataset.type == 0 && this.startX - this.endX > 30) {\n        this.restSlide();\n        parentElement.dataset.type = 1;\n      } // 右滑\n\n\n      if (parentElement.dataset.type == 1 && this.startX - this.endX < -30) {\n        this.restSlide();\n        parentElement.dataset.type = 0;\n      }\n\n      this.startX = 0;\n      this.endX = 0;\n    },\n    //判断当前是否有滑块处于滑动状态\n    checkSlide: function checkSlide() {\n      var listItems = document.querySelectorAll(\".li_vessel\");\n\n      for (var i = 0; i < listItems.length; i++) {\n        if (listItems[i].dataset.type == 1) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    //复位滑动状态\n    restSlide: function restSlide() {\n      var listItems = document.querySelectorAll(\".li_vessel\"); // 复位\n\n      for (var i = 0; i < listItems.length; i++) {\n        listItems[i].dataset.type = 0;\n      }\n    },\n    //删除数据信息\n    remove: function remove(e) {\n      var _this3 = this;\n\n      MessageBox.confirm('确定删除' + e.DeviceName + '设备?').then(function (action) {\n        delroot(e).then(function (res) {\n          Toast(\"设备删除成功\");\n\n          _this3.reload();\n        }).catch(function () {\n          Toast(\"设备删除失败，请稍后重试\");\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA,4C,CACA;;AACA;EACAA,kBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,SADA;MACA;MACAC,OAFA;MAEA;MACAC,mBAHA;MAGA;MACAC,aAJA;MAIA;MACAC;QACA,eADA;QACA;QACA;QACA,oBAHA;QAGA;QACA,qBAJA;QAIA;QACA,wEALA;QAKA;QACA,cANA;QAMA;QACA,gBAPA;QAOA;QACA,UARA;QAQA;QACA,iBATA;QASA;QACA;MAVA,CALA;MAiBAC,oBAjBA;MAiBA;MACAC,cAlBA;MAmBAC;QACAC;UACAC,YADA;UAEAC;QAFA,CADA;QAKAC;UACAF,uFADA;UAEAC;QAFA,CALA;QASA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAE;UACAH,YADA;UAEAC;QAFA,CAjBA;QAqBAG;UACAJ,YADA;UAEAC;QAFA,CArBA;QAyBAI;UACAL,YADA;UAEAC;QAFA;MAzBA;IAnBA;EAkDA,CArDA;EAsDAK;IACAC,cADA;IACAC,0BADA;IACAC;EADA,CAtDA;EAyDAC,OAzDA,qBAyDA;IAAA;;IACA;IACAC;MACAC,wBADA;MAEAC,aAFA;MAGAC;QACA;MADA;IAHA,GAOAC,IAPA,CAOA;MACA;IAEA,CAVA;IAWA;MACA;MACAJ;QACAC,4CADA;QAEAtB;UACA,SADA;UAEA,sBAFA;UAGA,0BAHA;UAIA;YACA,WACA,kBADA,CADA;YAIA;UAJA;QAJA;MAFA,GAcAyB,IAdA,CAcA;QACA,uCADA,CAEA;QACA;QACA;QACA;QACA;QACA;MACA,CAtBA;IAwBA,CA1BA;EA2BA,CAjGA;EAkGAC;IACA;IACAC,OAFA,qBAEA;MACA;IACA,CAJA;IAKA;IACAC,OANA,qBAMA;MAAA;;MACA;MACA;MACA,wCAHA,CAIA;;MACA;MACA;MACA;MACAP;QACAC,cADA;QAEAtB;MAFA,GAGAyB,IAHA,CAGA;QACAI;QACA;QACA;QACAC;UACA,kBADA;UAEA,oBAFA;UAGA,0DAHA;UAIA,iBAJA;UAKA,6BALA;UAMA;QANA,GAOAL,IAPA,CAOA;UACAM;QACA,CATA;;QAUA;MACA,CAlBA,EAkBAC,KAlBA,CAkBA;QACAH;MACA,CApBA;IAsBA,CApCA;IAqCA;IACAI,QAtCA,oBAsCAC,GAtCA,EAsCA;MACA;;MACA;QACA;QACAL;QACAM;QACA;MACA;;MACA;IACA,CA/CA;IAgDA;IACAC,YAjDA,0BAiDA;MACA;IACA,CAnDA;IAoDA;IACAC,OArDA,qBAqDA;MACA;QACA;MACA;IACA,CAzDA;IA0DA;IACAC,UA3DA,sBA2DAC,CA3DA,EA2DA;MACA;MACA;IACA,CA9DA;IA+DA;IACAC,QAhEA,oBAgEAD,CAhEA,EAgEA;MACA;MACA,kDAFA,CAGA;;MACA,wCAJA,CAKA;;MACA;QACA;QACAE;MACA,CATA,CAUA;;;MACA;QACA;QACAA;MACA;;MACA;MACA;IACA,CAjFA;IAkFA;IACAC,UAnFA,wBAmFA;MACA;;MACA;QACA;UACA;QACA;MACA;;MACA;IACA,CA3FA;IA4FA;IACAC,SA7FA,uBA6FA;MACA,wDADA,CAEA;;MACA;QACAC;MACA;IACA,CAnGA;IAoGA;IACAC,MArGA,kBAqGAN,CArGA,EAqGA;MAAA;;MACAO;QACAC;UACAlB;;UACA;QACA,CAHA,EAGAG,KAHA,CAGA;UACAH;QACA,CALA;MAMA,CAPA;IAUA;EAhHA;AAlGA","names":["inject","data","startX","endX","popupVisible","updata","rootForm","device_type_name","cameraList","rules","device_name","rule","msg","device_ip","device_password","device_type","device_id","components","Popupp","Administrtab","Foot","created","http","url","method","params","then","methods","formRec","infPost","Toast","journal","console","catch","validate","key","bool","changVisible","oneself","touchStart","e","touchEnd","parentElement","checkSlide","restSlide","listItems","remove","MessageBox","delroot"],"sourceRoot":"src/views/administer","sources":["Root.vue"],"sourcesContent":["<template>\r\n\t<div class=\"root\">\r\n\t\t<Administrtab>\r\n\t\t\t<span>设备管理</span>\r\n\t\t</Administrtab>\r\n\t\t<div class=\"journal\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li \r\n\t\t\t\tv-for=\"(item,index) in cameraList\"\r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t class=\"li_vessel\"\r\n\t\t\t\t data-type=\"0\"\r\n\t\t\t\t>\r\n\t\t\t\t <div style=\"width: 100%;\"  @touchstart.capture=\"touchStart\" @touchend.capture=\"touchEnd\" @click=\"oneself\">\r\n\t\t\t\t\t<div class=\"contant\">\r\n\t\t\t\t\t <p>\r\n\t\t\t\t\t\t<img v-if=\"item.DeviceTypeName=='屏幕'\" src=\"@/assets/images/pingmu.png\">\r\n\t\t\t\t\t\t<img v-if=\"item.DeviceTypeName!='屏幕'\" src=\"@/assets/images/Frame.png\" >\r\n\t\t\t\t\t </p>\r\n\t\t\t\t\t <span>{{item.DeviceName}}</span>\r\n\t\t\t\t\t  \r\n\t\t\t\t\t</div>\r\n\t\t\t\t </div>\r\n\t\t\t\t \r\n\t\t\t\t <div class=\"removeBtn\" @click=\"remove(item)\" :data-index=\"index\">删除</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<mt-button size=\"large\" type=\"primary\" @click=\"formRec\">添加设备</mt-button>\r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 蒙尘 -->\r\n\t\t <Popupp v-if=\"popupVisible\">\r\n\t\t\t <div slot=\"popupForm\">\r\n\t\t\t\t <h3>添加设备</h3>\r\n\t\t\t\t <form action=\"\" onsubmit=\"return false\">\r\n\t\t\t\t\t <p>\r\n\t\t\t\t\t\t<span>设备名称</span>\r\n\t\t\t\t\t\t<input type=\"text\" v-model='rootForm.device_name'>\r\n\t\t\t\t\t </p>\r\n\t\t\t\t\t  <p>\r\n\t\t\t\t\t\t<span>机器IP</span>\r\n\t\t\t\t\t\t<input type=\"num\" v-model='rootForm.device_ip'>\r\n\t\t\t\t\t  </p>\r\n\t\t\t\t\t  <p>\r\n\t\t\t\t\t\t  <span>\r\n\t\t\t\t\t\t\t  密码\r\n\t\t\t\t\t\t  </span>\r\n\t\t\t\t\t\t  <input type=\"password\" v-model=\"rootForm.device_password\" placeholder=\"输入密码\">\r\n\t\t\t\t\t  </p>\r\n\t\t\t\t\t  <p>\r\n\t\t\t\t\t\t  <span>\r\n\t\t\t\t\t\t\t  设备类型\r\n\t\t\t\t\t\t  </span>\r\n\t\t\t\t\t\t  <select name=\"type\" v-model=\"rootForm.device_type\">\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t v-for=\"(item,index) in device_type_name\"\r\n\t\t\t\t\t\t\t :key=\"index\"\r\n\t\t\t\t\t\t\t :value='index+ 1'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t {{item.device_type_name}}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t  </select>\r\n\t\t\t\t\t  </p>\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  <div class=\"formope\">\r\n\t\t\t\t\t\t  <button class=\"onsub\" @click=\"changVisible\">取消</button>\r\n\t\t\t\t\t\t  <button class=\"sub\" @click='infPost' >保存</button>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t </form>\r\n\t\t\t </div>\r\n\t\t </Popupp>\r\n\t\t <Foot></Foot>\r\n\t</div>\n</template>\n\n<script>\r\n\timport Popupp from'@/components/Popupp.vue'\r\n\timport Administrtab from '@/components/Administrtab.vue'\r\n\timport http from '@/common/api/request.js'\r\n\timport { delroot,journal } from '@/common/api/adminCenter'\r\n\timport Foot from '@/components/Foot.vue'\r\n\timport { Toast,MessageBox } from 'mint-ui'\r\n\t// import BetterScroll from '@better-scroll/core'\r\n\texport default{\r\n\t\tinject:[\"reload\"],\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tstartX: 0, //滑动开始\r\n\t\t\t\tendX: 0, //滑动结束\r\n\t\t\t\tpopupVisible:false,//添加设备表单是否显示\r\n\t\t\t\tupdata:false,//设备是否添加成功\r\n\t\t\t\trootForm:{\r\n\t\t\t\t  'device_ip':'',  //设备ip\r\n\t\t\t\t  // 'device_id':'',//设备\r\n\t\t\t\t  'device_account':'',//设备账号\r\n\t\t\t\t  'device_password':'',//设备密码\r\n\t\t\t\t  'org_id':Number(JSON.parse(localStorage.getItem('urlUserinfor')).orgId)   ,//机构id\r\n\t\t\t\t  'push_url':'',//推流直播地址\r\n\t\t\t\t  'device_type':1,//设备类型\r\n\t\t\t\t  'state':1,//状态\r\n\t\t\t\t  'device_name':'',//设备名称\r\n\t\t\t\t  \"scope\": '', \r\n\t\t\t\t},\r\n\t\t\t\tdevice_type_name: [], //设备类型名称\r\n\t\t\t\tcameraList:[],\r\n\t\t\t\trules:{\r\n\t\t\t\t\tdevice_name:{\r\n\t\t\t\t\t\trule:/^.+$/,\r\n\t\t\t\t\t\tmsg:\"设备名称不能为空\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdevice_ip:{\r\n\t\t\t\t\t\trule:/^((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])$/,\r\n\t\t\t\t\t\tmsg:\"ip地址输入错误\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// device_id:{\r\n\t\t\t\t\t// \trule:/^.+$/,\r\n\t\t\t\t\t// \tmsg:\"设备id不能为空\"\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t// device_account:{\r\n\t\t\t\t\t// \trule:/^.+$/,\r\n\t\t\t\t\t// \tmsg:\"设备账号不能为空\"\r\n\t\t\t\t\t// },\r\n\t\t\t\t\tdevice_password:{\r\n\t\t\t\t\t\trule:/^.+$/,\r\n\t\t\t\t\t\tmsg:\"设备密码不能为空\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdevice_type:{\r\n\t\t\t\t\t\trule:/^.+$/,\r\n\t\t\t\t\t\tmsg:\"设备类型不能为空\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdevice_id:{\r\n\t\t\t\t\t\trule:/^.+$/,\r\n\t\t\t\t\t\tmsg:\"设备id不能为空\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tPopupp,Administrtab,Foot\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\t// 获取设备列表\r\n\t\t\thttp.$axios({\r\n\t\t\t\t\turl: 'device/getDevices',\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\"org_id\": this.$store.state.userorgid\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.cameraList = res.data.data\r\n\t\t\t\r\n\t\t\t\t})\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t// 获取设备类型名称\r\n\t\t\t\t\thttp.$axios({\r\n\t\t\t\t\t\turl: 'https://1to2to3.cn/rds2/service/query',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\"auth\": 2,\r\n\t\t\t\t\t\t\t\"project\": \"eagle_eye\",\r\n\t\t\t\t\t\t\t\"table\": \"sys_device_type\",\r\n\t\t\t\t\t\t\t\"conditions\": {\r\n\t\t\t\t\t\t\t\t\"fields\": [\r\n\t\t\t\t\t\t\t\t\t\"device_type_name\"\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\"query\": {}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.device_type_name = res.data.data\r\n\t\t\t\t\t\t// new BetterScroll('.wrapper', {\r\n\t\t\t\t\t\t//    movable: true,\r\n\t\t\t\t\t\t//    zoom: true,\r\n\t\t\t\t\t\t// \tprobeType:2,\r\n\t\t\t\t\t\t// \tclick:true\r\n\t\t\t\t\t\t//  })\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 添加设备表单\r\n\t\t\tformRec(){\r\n\t\t\t\tthis.popupVisible=true;\r\n\t\t\t},\r\n\t\t\t// 保存添加设备信息\r\n\t\t\tinfPost(){\r\n\t\t\t\tif( !this.validate('device_name') ) return;\r\n\t\t\t\tif( !this.validate('device_ip') ) return;\r\n\t\t\t\tif( !this.validate('device_id') ) return;\r\n\t\t\t\t// if( !this.validate('device_account') ) return;\r\n\t\t\t\tif( !this.validate('device_password') ) return;\r\n\t\t\t\tif( !this.validate('device_type') ) return;\r\n\t\t\t\tthis.rootForm.device_id=Number(this.rootForm.device_id)\r\n\t\t\thttp.$axios({\r\n\t\t\t\turl:'/device',\r\n\t\t\t\tdata:this.rootForm\r\n\t\t\t}).then(res=>{\r\n\t\t\t\tToast(res.data.result);\r\n\t\t\t\tthis.popupVisible=false;\r\n\t\t\t\tthis.updata=true\r\n\t\t\t\tjournal({\r\n\t\t\t\t\t\"appName\": \"eagle\",\r\n\t\t\t\t\t\"methodName\": \"添加设备\",\r\n\t\t\t\t\t\"methodRemark\": \"添加了\"+this.rootForm.device_name+\"设备\" ,\r\n\t\t\t\t\t\"optReqParam\": \"\",\r\n\t\t\t\t\t\"optResInfo\": res.data.result,\r\n\t\t\t\t\t\"reqUrl\": \"\"\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t})\r\n\t\t\t\tthis.reload()\r\n\t\t\t}).catch(()=>{\r\n\t\t\t\tToast('添加失败，请重试');\r\n\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//验证信息提示\r\n\t\t\tvalidate( key ){\r\n\t\t\t\tlet bool = true;\r\n\t\t\t\tif( !this.rules[key].rule.test( this.rootForm[key])  ){\r\n\t\t\t\t\t//提示信息\r\n\t\t\t\t\tToast(this.rules[key].msg);\r\n\t\t\t\t\tbool = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn bool;\r\n\t\t\t},\r\n\t\t\t// 关闭蒙尘\r\n\t\t\tchangVisible(){\r\n\t\t\t\tthis.popupVisible=false;\r\n\t\t\t},\r\n\t\t   // 向左滑动出现删除按钮时，点击商品信息区域取消删除\r\n\t\t\toneself() {\r\n\t\t\t  if (this.checkSlide()) {\r\n\t\t\t\tthis.restSlide();\r\n\t\t\t  } \r\n\t\t\t},\r\n\t\t\t//滑动开始\r\n\t\t\ttouchStart(e) {\r\n\t\t\t  // 记录初始位置\r\n\t\t\t  this.startX = e.touches[0].clientX;\r\n\t\t\t},\r\n\t\t\t//滑动结束\r\n\t\t\ttouchEnd(e) {\r\n\t\t\t  // 当前滑动的父级元素\r\n\t\t\t  let parentElement = e.currentTarget.parentElement;\r\n\t\t\t  // 记录结束位置\r\n\t\t\t  this.endX = e.changedTouches[0].clientX;\r\n\t\t\t  // 左滑大于30距离删除出现\r\n\t\t\t  if (parentElement.dataset.type == 0 && this.startX - this.endX > 30) {\r\n\t\t\t\tthis.restSlide();\r\n\t\t\t\tparentElement.dataset.type = 1;\r\n\t\t\t  }\r\n\t\t\t  // 右滑\r\n\t\t\t  if (parentElement.dataset.type == 1 && this.startX - this.endX < -30) {\r\n\t\t\t\tthis.restSlide();\r\n\t\t\t\tparentElement.dataset.type = 0;\r\n\t\t\t  }\r\n\t\t\t  this.startX = 0;\r\n\t\t\t  this.endX = 0;\r\n\t\t\t},\r\n\t\t\t//判断当前是否有滑块处于滑动状态\r\n\t\t\tcheckSlide() {\r\n\t\t\t  let listItems = document.querySelectorAll(\".li_vessel\");\r\n\t\t\t  for (let i = 0; i < listItems.length; i++) {\r\n\t\t\t\tif (listItems[i].dataset.type == 1) {\r\n\t\t\t\t  return true;\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  return false;\r\n\t\t\t},\r\n\t\t\t//复位滑动状态\r\n\t\t\trestSlide() {\r\n\t\t\t  let listItems = document.querySelectorAll(\".li_vessel\");\r\n\t\t\t  // 复位\r\n\t\t\t  for (let i = 0; i < listItems.length; i++) {\r\n\t\t\t\tlistItems[i].dataset.type = 0;\r\n\t\t\t  }\r\n\t\t\t},\r\n\t\t\t//删除数据信息\r\n\t\t\tremove(e) {\r\n\t\t\t\tMessageBox.confirm('确定删除'+e.DeviceName+'设备?').then(action => {\r\n\t\t\t\t  delroot(e).then(res=>{\r\n\t\t\t\t  \t\tToast(\"设备删除成功\")\r\n\t\t\t\t\t\tthis.reload()\r\n\t\t\t\t  }).catch(()=>{\r\n\t\t\t\t\t  Toast(\"设备删除失败，请稍后重试\")\r\n\t\t\t\t  })\r\n\t\t\t\t});\r\n\t\t\t  \r\n\t\t\t  \r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t\r\n\t\r\n\t \r\n\t.li_vessel {\r\n\t  transition: all 0.2s;\r\n\t}\r\n\t.li_vessel[data-type=\"0\"] {\r\n\t  transform: translate3d(0, 0, 0);\r\n\t}\r\n\t.li_vessel[data-type=\"1\"] {\r\n\t  transform: translate3d(calc(50% - 4.44rem - 128px), 0, 0);\r\n\t}\r\n\t.li_vessel .removeBtn {\r\n\t  width: 64px;\r\n\t  height: 2.133333rem;\r\n\t  background: #FF2638;\r\n\t  font-size: 16px;\r\n\t  color: #fff;\r\n\t  text-align: center;\r\n\t  line-height: 2.133333rem;\r\n\t  position: absolute;\r\n\t  top: 0px;\r\n\t  right:calc(50% - 4.44rem - 128px);\r\n\t  border-radius: 0.266667rem;\r\n\t}\r\n\t/* 左边的图片样式 */\r\n\t.contant {\r\n\t  width: 100%;\r\n\t  height:2.133333rem;\r\n\t  background-color: white;\r\n\t  display: flex;\r\n\t  align-items: center;\r\n\t  justify-content: left;\r\n\t  padding: 0 0.32rem;\r\n\t  box-sizing: border-box;\r\n\t  font-size: 0.426667rem;\r\n\t  margin-bottom: 0.32rem;\r\n\t  border-radius: 0.266667rem;\r\n\t}\r\n\t \r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t.root{\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t.mint-popup{\r\n\t\tborder-radius: 0.266667rem;\r\n\t\twidth: 8rem;\r\n\t\theight: 9.066667rem;\r\n\t}\r\n\t\r\n\tform{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmargin-top: 0.64rem;\r\n\t\tborder-radius: 0.266667rem;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 1.2rem 1.04rem 1.2rem;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t\r\n\t.mint-popup h3{\r\n\t\tfont-size: 0.426667rem;\r\n\t\tcolor: #515151;\r\n\t\tborder-bottom:1px solid #BFBFBF;\r\n\t\theight: 1.413333rem;\r\n\t\ttext-align: center;\r\n\t\tline-height: 1.413333rem;\r\n\t\tfont-weight: normal;\r\n\t\t\r\n\t}\r\n\tform p{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 0.666667rem;\r\n\t\talign-items: center;\r\n\t}\r\n\tform p span{\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #515151;\r\n\t}\r\n\tform  input,form  select{\r\n\t\twidth: 4rem;\r\n\t\theight: 32px;\r\n\t\tborder: 1px solid #C4C4C4B2;\r\n\t\tborder-radius: 0.133333rem;\r\n\t\ttext-indent:8px;\r\n\t}\r\n\tform .roobtip{\r\n\t\theight: 0.906667rem;\r\n\t}\r\n\tform .roobtip p{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content:center;\r\n\t\twidth: 4rem;\r\n\t\theight: 32px;\r\n\t\tborder: 1px solid #C4C4C4B2;\r\n\t\tborder-radius: 0.133333rem;\r\n\t}\r\n\tform .roobtip input{\r\n\t\twidth: 0.853333rem;\r\n\t\tborder: none;\r\n\t\t/* background-color: red; */\r\n\t\ttext-indent: 0.2rem;\r\n\t}\r\n\tform .roobtip b{\r\n\t\tdisplay: flex;\r\n\t\tfont-weight: normal;\r\n\t\twidth: 0.5px;\r\n\t\theight: 0.853333rem;\r\n\t\tline-height: 0.853333rem;\r\n\t}\r\n\t.formope{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\tmargin-top: 1.333333rem;\r\n\t}\r\n\t.formope button{\r\n\t\twidth: 2.4rem;\r\n\t\theight: 30px;\r\n\t\tborder-radius: 0.133333rem;\r\n\t\tcolor: #3A3A3A;\r\n\t\toutline: none;\r\n\t\tborder: 1px solid #51515180;\r\n\t\tbackground-color: white;\r\n\t}\r\n\t.formope .sub{\r\n\t\tbackground-color: #278DE5;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t}\r\n\t\r\n\t.online{\r\n\t\tbackground: #66d3b8;\r\n\t}\r\n\t.outline{\r\n\t\tbackground: #C4C4C4;\r\n\t}\r\n\t/deep/.mint-popup {\r\n\t\tz-index: 999 !important;\r\n\t}\r\n\t/deep/.v-modal{\r\n\t\tz-index: 998 !important;\r\n\t}\r\n\t.journal{\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 0.666667rem;\r\n\t\tflex-direction: column;\r\n\t\toverflow-y: scroll;\r\n\t\toverflow-x: hidden;\r\n\t\talign-items: center;\r\n\t}\r\n\t.journal ul{\r\n\t\twidth: 8.88rem;\r\n\t\t\r\n\t}\r\n\t.journal ul li{\r\n\t\t\r\n\t}\r\n\t.journal ul li p{\r\n\t\twidth: 1.6rem;\r\n\t\theight: 1.6rem;\r\n\t\tborder-radius: 0.266667rem;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: linear-gradient(50deg, rgba(213, 255, 180, 0.53) 0%, #37D7B0 100%);\r\n\t\tmargin-right: 0.24rem;\r\n\t}\r\n\t.journal ul li img{\r\n\t\twidth: 1.066667rem;\r\n\t\theight: 1.066667rem;\r\n\t}\r\n\t.tips{\r\n\t\twidth: 8.88rem;\r\n\t\tfont-size: 0.373333rem;\r\n\t\tcolor: #1E1E1E;\r\n\t\tmargin: 0.5rem 0 0.213333rem 0;\r\n\t}\r\n\t.tips span{\r\n\t\tdisplay: flex;\r\n\t\tfloat: right;\r\n\t\tfont-size: 12px;\r\n\t\talign-items: center;\r\n\t}\r\n\t.mint-button{\r\n\t\twidth: 8.88rem;\r\n\t}\r\n\t\n</style>"]},"metadata":{},"sourceType":"module"}