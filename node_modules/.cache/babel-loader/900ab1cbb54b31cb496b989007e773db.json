{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Serch from '@/components/home/Serch.vue';\nimport Camera from '@/components/home/Camera.vue';\nimport Abnormal from '@/components/home/Abnormal.vue';\nimport Foot from '@/components/Foot.vue';\nimport '@/assets/prop.css';\nimport http from '@/common/api/request.js'; // import {ChatClient} from \"@qians/quake_ws_client-wasm\";\n//插件\n// import BScroll from '@better-scroll/core'\n\nexport default {\n  name: 'HomeView',\n  data: function data() {\n    return {\n      newsList: [//公告数据\n      {\n        id: 1,\n        con: \"微数场新功能即将上线，敬请期待~\"\n      }],\n      cameraPopup: false,\n      //监视器蒙尘状态\n      addshow: false,\n      pop1: false,\n      //serch的pop们\n      pop2: false,\n      pop3: false,\n      pop4: false,\n      cameraList: [],\n      device_type_name: [],\n      //设备类型名称\n      camlist: false //设备列表是否更新\n\n    };\n  },\n  components: {\n    Serch: Serch,\n    Camera: Camera,\n    Foot: Foot,\n    Abnormal: Abnormal\n  },\n  methods: {\n    // //摄像头蒙尘状态\n    change: function change(res) {\n      this.cameraPopup = res;\n    },\n    // 头部加号状态\n    addnewshow: function addnewshow(rq) {\n      this.addshow = rq;\n    },\n    // addList\n    closeTab: function closeTab() {\n      if (this.addshow) {\n        this.addshow = false;\n        this.$refs.child.showTab(this.addshow);\n      }\n    },\n    //serch的pop们\n    serpop1: function serpop1(res) {\n      this.pop1 = res;\n    },\n    serpop2: function serpop2(res) {\n      this.pop2 = res;\n    },\n    serpop3: function serpop3(res) {\n      this.pop3 = res;\n    },\n    serpop4: function serpop4(res) {\n      this.pop4 = res;\n    },\n    // 设备列表是否更新\n    updata: function updata(res) {\n      this.camlist = res;\n    },\n    // 连接wasm\n    // chat() {\n    // \t// console.log(\"[Views: HomeView.vue]wait for init client\")\n    // \t//FIXME: change k32212 to username(token)\n    // \tconst that = this\n    // \tChatClient.init(\"k32212\", 'levitas.quakeai.tech:31033', 'eye_h5',true)\n    // \tthis.ChatClient = ChatClient\n    // \tsetTimeout(function(){\n    // \t\tconsole.log(\"[Views: HomeView.vue]chat client has been inited: \", that.ChatClient.get_group_chridren())\n    // \t},5000)\n    // },\n    // 获取设备列表\n    getCamerList: function getCamerList() {\n      var _this = this;\n\n      // yconsole.log(\"123456\")\n      http.$axios({\n        url: 'device/getDevices',\n        method: \"GET\",\n        params: {\n          \"org_id\": this.$store.state.userorgid\n        }\n      }).then(function (res) {\n        // console.log(res.data)\n        _this.cameraList = res.data.data;\n      });\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    // this.chat()\n    this.getCamerList();\n    this.$nextTick(function () {\n      // 获取设备类型名称\n      http.$axios({\n        url: 'https://1to2to3.cn/rds2/service/query',\n        data: {\n          \"auth\": 2,\n          \"project\": \"eagle_eye\",\n          \"table\": \"sys_device_type\",\n          \"conditions\": {\n            \"fields\": [\"device_type_name\"],\n            \"query\": {}\n          }\n        }\n      }).then(function (res) {\n        // console.log(res.data)\n        _this2.device_type_name = res.data.data;\n      });\n    });\n  },\n  // mounted() {\n  //  this.$nextTick(()=>{\n  //   console.log(this.$store.state.userorgid)\n  //  })\n  // },\n  watch: {\n    camlist: function camlist(val) {\n      var _this3 = this;\n\n      if (val == true) {\n        // 获取设备列表\n        http.$axios({\n          url: 'device/getDevices',\n          method: \"GET\",\n          params: {\n            \"org_id\": this.$store.state.userorgid //机构ID\n            //\"page\":1,\n            //\"pageSize\":10,\n            //     \"device_type\":1 设备类型\n\n          }\n        }).then(function (res) {\n          // console.log(res.data.data)\n          _this3.cameraList = res.data.data;\n          _this3.camlist = false;\n        });\n      }\n    } // ExceptionList() {\n    // \tthis.$nextTick(() => {\n    // \t\tlet bs = new BScroll('.wrapper', {\n    // \t\t\tmovable: true,\n    // \t\t\tzoom: true,\n    // \t\t\tprobeType: 2,\n    // \t\t\tclick: true\n    // \t\t})\n    // \t})\n    // }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA,2C,CACA;AAGA;AACA;;AACA;EACAA,gBADA;EAGAC,IAHA,kBAGA;IACA;MACAC;MACA;QACAC,KADA;QAEAC;MAFA,CADA,CADA;MAOAC,kBAPA;MAOA;MACAC,cARA;MASAC,WATA;MASA;MACAC,WAVA;MAWAC,WAXA;MAYAC,WAZA;MAaAC,cAbA;MAcAC,oBAdA;MAcA;MACAC,cAfA,CAeA;;IAfA;EAkBA,CAtBA;EAuBAC;IACAC,YADA;IAEAC,cAFA;IAGAC,UAHA;IAIAC;EAJA,CAvBA;EA6BAC;IACA;IACAC,MAFA,kBAEAC,GAFA,EAEA;MACA;IACA,CAJA;IAMA;IACAC,UAPA,sBAOAC,EAPA,EAOA;MACA;IACA,CATA;IAUA;IACAC,QAXA,sBAWA;MACA;QACA;QACA;MACA;IACA,CAhBA;IAiBA;IACAC,OAlBA,mBAkBAJ,GAlBA,EAkBA;MACA;IACA,CApBA;IAqBAK,OArBA,mBAqBAL,GArBA,EAqBA;MACA;IACA,CAvBA;IAwBAM,OAxBA,mBAwBAN,GAxBA,EAwBA;MACA;IACA,CA1BA;IA2BAO,OA3BA,mBA2BAP,GA3BA,EA2BA;MACA;IACA,CA7BA;IA8BA;IACAQ,MA/BA,kBA+BAR,GA/BA,EA+BA;MACA;IACA,CAjCA;IAmCA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACAS,YAhDA,0BAgDA;MAAA;;MACA;MACAC;QACAC,wBADA;QAEAC,aAFA;QAGAC;UACA;QADA;MAHA,GAOAC,IAPA,CAOA;QACA;QACA;MAEA,CAXA;IAYA;EA9DA,CA7BA;EA8FAC,OA9FA,qBA8FA;IAAA;;IACA;IAEA;IACA;MAEA;MACAL;QACAC,4CADA;QAEA/B;UACA,SADA;UAEA,sBAFA;UAGA,0BAHA;UAIA;YACA,WACA,kBADA,CADA;YAIA;UAJA;QAJA;MAFA,GAcAkC,IAdA,CAcA;QACA;QACA;MACA,CAjBA;IAmBA,CAtBA;EAyBA,CA3HA;EA6HA;EACA;EACA;EACA;EACA;EACAE;IACAxB,OADA,mBACAyB,GADA,EACA;MAAA;;MACA;QACA;QACAP;UACAC,wBADA;UAEAC,aAFA;UAGAC;YACA,qCADA,CACA;YACA;YACA;YACA;;UAJA;QAHA,GAUAC,IAVA,CAUA;UACA;UACA;UACA;QACA,CAdA;MAeA;IACA,CApBA,CAsBA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EA/BA;AAlIA","names":["name","data","newsList","id","con","cameraPopup","addshow","pop1","pop2","pop3","pop4","cameraList","device_type_name","camlist","components","Serch","Camera","Foot","Abnormal","methods","change","res","addnewshow","rq","closeTab","serpop1","serpop2","serpop3","serpop4","updata","getCamerList","http","url","method","params","then","created","watch","val"],"sourceRoot":"src/views","sources":["HomeView.vue"],"sourcesContent":["<template>\r\n\r\n\t<div class=\"home\" @click=\"closeTab\">\r\n\t\t<header>\r\n\t\t\t<div class=\"home-top\">\r\n\t\t\t\t<Serch @addnew='addnewshow' @pop1='serpop1' @pop2='serpop2' @pop3='serpop3' @pop4='serpop4' ref=\"child\">\r\n\t\t\t\t</Serch>\r\n\t\t\t\t<Camera @tofa=\"change\" @camlist=\"updata\" :camera=\"cameraList\" :cam=\"camlist\"\r\n\t\t\t\t\t:device_types=\"device_type_name\">\r\n\t\t\t\t</Camera>\r\n\t\t\t\t<h4>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<img src=\"@/assets/images/horn.png\" alt=\"\">\r\n\t\t\t\t\t\t公告：\r\n\t\t\t\t\t\t<span v-for=\"(item,index) in newsList\" :key=\"index\">\r\n\t\t\t\t\t\t\t{{item.con}}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</h4>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t\t<div class=\"suffix\">\r\n\t\t\t<div class=\"suffix-title\">\r\n\t\t\t\t<img src=\"@/assets/images/suffix.png\" alt=\"\">\r\n\t\t\t\t<span>工控任务</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<section class=\"home-con\">\r\n\t\t\t<div class=\"clearfix\" :class=\"cameraPopup || pop1 || pop2 || pop3 || pop4? 'zindex':''\">\r\n\t\t\t\t<Abnormal></Abnormal>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t<Foot></Foot>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Serch from '@/components/home/Serch.vue'\r\n\timport Camera from '@/components/home/Camera.vue'\r\n\timport Abnormal from '@/components/home/Abnormal.vue'\r\n\timport Foot from '@/components/Foot.vue'\r\n\timport '@/assets/prop.css'\r\n\timport http from '@/common/api/request.js'\r\n\t// import {ChatClient} from \"@qians/quake_ws_client-wasm\";\r\n\r\n\r\n\t//插件\r\n\t// import BScroll from '@better-scroll/core'\r\n\texport default {\r\n\t\tname: 'HomeView',\r\n\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnewsList: [ //公告数据\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tcon: \"微数场新功能即将上线，敬请期待~\",\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcameraPopup: false, //监视器蒙尘状态\r\n\t\t\t\taddshow: false,\r\n\t\t\t\tpop1: false, //serch的pop们\r\n\t\t\t\tpop2: false,\r\n\t\t\t\tpop3: false,\r\n\t\t\t\tpop4: false,\r\n\t\t\t\tcameraList: [],\r\n\t\t\t\tdevice_type_name: [], //设备类型名称\r\n\t\t\t\tcamlist: false, //设备列表是否更新\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tSerch,\r\n\t\t\tCamera,\r\n\t\t\tFoot,\r\n\t\t\tAbnormal\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// //摄像头蒙尘状态\r\n\t\t\tchange(res) {\r\n\t\t\t\tthis.cameraPopup = res\r\n\t\t\t},\r\n\r\n\t\t\t// 头部加号状态\r\n\t\t\taddnewshow(rq) {\r\n\t\t\t\tthis.addshow = rq\r\n\t\t\t},\r\n\t\t\t// addList\r\n\t\t\tcloseTab() {\r\n\t\t\t\tif (this.addshow) {\r\n\t\t\t\t\tthis.addshow = false;\r\n\t\t\t\t\tthis.$refs.child.showTab(this.addshow);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//serch的pop们\r\n\t\t\tserpop1(res) {\r\n\t\t\t\tthis.pop1 = res\r\n\t\t\t},\r\n\t\t\tserpop2(res) {\r\n\t\t\t\tthis.pop2 = res\r\n\t\t\t},\r\n\t\t\tserpop3(res) {\r\n\t\t\t\tthis.pop3 = res\r\n\t\t\t},\r\n\t\t\tserpop4(res) {\r\n\t\t\t\tthis.pop4 = res\r\n\t\t\t},\r\n\t\t\t// 设备列表是否更新\r\n\t\t\tupdata(res) {\r\n\t\t\t\tthis.camlist = res\r\n\t\t\t},\r\n\r\n\t\t\t// 连接wasm\r\n\t\t\t// chat() {\r\n\t\t\t// \t// console.log(\"[Views: HomeView.vue]wait for init client\")\r\n\t\t\t// \t//FIXME: change k32212 to username(token)\r\n\t\t\t// \tconst that = this\r\n\t\t\t// \tChatClient.init(\"k32212\", 'levitas.quakeai.tech:31033', 'eye_h5',true)\r\n\t\t\t// \tthis.ChatClient = ChatClient\r\n\t\t\t// \tsetTimeout(function(){\r\n\t\t\t// \t\tconsole.log(\"[Views: HomeView.vue]chat client has been inited: \", that.ChatClient.get_group_chridren())\r\n\t\t\t// \t},5000)\r\n\t\t\t\t\r\n\t\t\t// },\r\n\t\t\t// 获取设备列表\r\n\t\t\tgetCamerList(){\r\n\t\t\t\t// yconsole.log(\"123456\")\r\n\t\t\t\thttp.$axios({\r\n\t\t\t\t\t\turl: 'device/getDevices',\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\"org_id\": this.$store.state.userorgid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\t\tthis.cameraList = res.data.data\r\n\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// this.chat()\r\n\t\t\t\r\n\t\t\tthis.getCamerList()\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\r\n\t\t\t\t\t// 获取设备类型名称\r\n\t\t\t\t\thttp.$axios({\r\n\t\t\t\t\t\turl: 'https://1to2to3.cn/rds2/service/query',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\"auth\": 2,\r\n\t\t\t\t\t\t\t\"project\": \"eagle_eye\",\r\n\t\t\t\t\t\t\t\"table\": \"sys_device_type\",\r\n\t\t\t\t\t\t\t\"conditions\": {\r\n\t\t\t\t\t\t\t\t\"fields\": [\r\n\t\t\t\t\t\t\t\t\t\"device_type_name\"\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\"query\": {}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\t\tthis.device_type_name = res.data.data\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t})\r\n\r\n\r\n\t\t},\r\n\r\n\t\t// mounted() {\r\n\t\t//  this.$nextTick(()=>{\r\n\t\t//   console.log(this.$store.state.userorgid)\r\n\t\t//  })\r\n\t\t// },\r\n\t\twatch: {\r\n\t\t\tcamlist(val) {\r\n\t\t\t\tif (val == true) {\r\n\t\t\t\t\t// 获取设备列表\r\n\t\t\t\t\thttp.$axios({\r\n\t\t\t\t\t\turl: 'device/getDevices',\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\"org_id\": this.$store.state.userorgid, //机构ID\r\n\t\t\t\t\t\t\t//\"page\":1,\r\n\t\t\t\t\t\t\t//\"pageSize\":10,\r\n\t\t\t\t\t\t\t//     \"device_type\":1 设备类型\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t// console.log(res.data.data)\r\n\t\t\t\t\t\tthis.cameraList = res.data.data\r\n\t\t\t\t\t\tthis.camlist = false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// ExceptionList() {\r\n\t\t\t// \tthis.$nextTick(() => {\r\n\t\t\t// \t\tlet bs = new BScroll('.wrapper', {\r\n\t\t\t// \t\t\tmovable: true,\r\n\t\t\t// \t\t\tzoom: true,\r\n\t\t\t// \t\t\tprobeType: 2,\r\n\t\t\t// \t\t\tclick: true\r\n\t\t\t// \t\t})\r\n\t\t\t// \t})\r\n\t\t\t// }\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.clearfix {\r\n\t\tdisplay: block;\r\n\t\tcontent: \"\";\r\n\t\tclear: both;\r\n\r\n\t}\r\n\r\n\t.zindex {\r\n\t\ttransform: scale(0) !important;\r\n\t}\r\n\r\n\t.home {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t}\r\n\tsection {\r\n\t\tflex: 1;\r\n\t\t/* overflow: hidden; */\r\n\t}\r\n\r\n\theader {\r\n\t\theight: 6rem;\r\n\t\twidth: 100%;\r\n\t\tdisplay: block;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.home-top {\r\n\t\theight: 6rem;\r\n\t\twidth: 100%;\r\n\t\tbackground: #3778DA;\r\n\t\tborder-bottom-left-radius: 0.625rem;\r\n\t\tborder-bottom-right-radius: 0.625rem;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\th4 {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\r\n\t}\r\n\r\n\th4 p {\r\n\t\twidth: 8.88rem;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #FFE0A3;\r\n\t\tfont-weight: normal;\r\n\t\tmargin-top: 0.4rem;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\th4 img {\r\n\t\tmargin-right: 0.186667rem;\r\n\t\twidth: 0.426667rem;\r\n\t\theight: 0.426667rem;\r\n\t}\r\n\t.suffix {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size:14px;\r\n\t\tcolor: #515151;\r\n\t\tmargin-top:0.4rem;\r\n\t\tmargin-bottom: 0.2rem;\r\n\t}\r\n\t\r\n\t.suffix-title {\r\n\t\tdisplay: flex;\r\n\t\twidth: 8.88rem;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.suffix-title img {\r\n\t\twidth: 0.426667rem;\r\n\t\theight: 0.453333rem;\r\n\t\tmargin-right: 0.106667rem;\r\n\t}\r\n\t.test {\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t/deep/input[type=\"search\"] {\r\n\t\t-webkit-appearance: none !important;\r\n\t}\r\n\t\r\n</style>\n"]},"metadata":{},"sourceType":"module"}