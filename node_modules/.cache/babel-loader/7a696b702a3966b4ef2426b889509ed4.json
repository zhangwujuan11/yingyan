{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Serch from '@/components/home/Serch.vue';\nimport Camera from '@/components/home/Camera.vue';\nimport Abnormal from '@/components/home/Abnormal.vue';\nimport Foot from '@/components/Foot.vue';\nimport '@/assets/prop.css';\nimport http from '@/common/api/request.js'; //插件\n\nimport BScroll from '@better-scroll/core';\nexport default {\n  name: 'HomeView',\n  data: function data() {\n    return {\n      newsList: [//公告数据\n      {\n        id: 1,\n        con: \"微数场新功能即将上线，敬请期待~\"\n      }],\n      cameraPopup: false,\n      //监视器蒙尘状态\n      addshow: false,\n      pop1: false,\n      //serch的pop们\n      pop2: false,\n      pop3: false,\n      pop4: false,\n      cameraList: [],\n      device_type_name: [],\n      //设备类型名称\n      camlist: false,\n      //设备列表是否更新\n      ExceptionList: []\n    };\n  },\n  components: {\n    Serch: Serch,\n    Camera: Camera,\n    Foot: Foot,\n    Abnormal: Abnormal\n  },\n  methods: {\n    // //摄像头蒙尘状态\n    change: function change(res) {\n      this.cameraPopup = res;\n    },\n    // 头部加号状态\n    addnewshow: function addnewshow(rq) {\n      this.addshow = rq;\n    },\n    // addList\n    closeTab: function closeTab() {\n      if (this.addshow) {\n        this.addshow = false;\n        this.$refs.child.showTab(this.addshow);\n      }\n    },\n    //serch的pop们\n    serpop1: function serpop1(res) {\n      this.pop1 = res;\n    },\n    serpop2: function serpop2(res) {\n      this.pop2 = res;\n    },\n    serpop3: function serpop3(res) {\n      this.pop3 = res;\n    },\n    serpop4: function serpop4(res) {\n      this.pop4 = res;\n    },\n    // 设备列表是否更新\n    updata: function updata(res) {\n      this.camlist = res;\n    } // 连接wasm\n    //     chat () {\n    //       const that = this\n    //       let jrJS = ''\n    //       import('@qians/quake_ws_client-wasm/quake_ws_client_wasm.js').then(res => {\n    //         jrJS = res.ChatClient\n    //         this.ChatClient = jrJS\n    //         this.ChatClient.init(sessionStorage.getItem('username'), 'levitas.quakeai.tech:31033', 'PC', true)\n    //   \t\tconsole.log(res)\n    //       })\n    //     },\n\n  },\n  created: function created() {\n    var _this = this;\n\n    // import('@qians/quake_ws_client-wasm/quake_ws_client_wasm.js').then(res => {\n    //  console.log(res)\n    //         }),\n    this.$store.commit('USER_ORG_ID', this.$route.query.UserOrgID);\n    this.$nextTick(function () {\n      // 获取设备列表\n      http.$axios({\n        url: 'device/getDevices',\n        method: \"GET\",\n        params: {\n          \"org_id\": _this.$store.state.userorgid\n        }\n      }).then(function (res) {\n        // console.log(res.data)\n        _this.cameraList = res.data.data;\n      }), // 获取设备类型名称\n      http.$axios({\n        url: 'https://1to2to3.cn/rds2/service/query',\n        data: {\n          \"auth\": 2,\n          \"project\": \"eagle_eye\",\n          \"table\": \"sys_device_type\",\n          \"conditions\": {\n            \"fields\": [\"device_type_name\"],\n            \"query\": {}\n          }\n        }\n      }).then(function (res) {\n        // console.log(res.data)\n        _this.device_type_name = res.data.data;\n      }), // 获取工控服务列表\n      http.$axios({\n        url: 'job/getJobs',\n        method: 'GET',\n        params: {\n          \"org_id\": _this.$store.state.userorgid\n        }\n      }).then(function (res) {\n        _this.ExceptionList = res.data.data;\n      }).catch(function () {\n        _this.ExceptionList = [];\n      });\n    });\n  },\n  // mounted() {\n  //  this.$nextTick(()=>{\n  //   console.log(this.$store.state.userorgid)\n  //  })\n  // },\n  watch: {\n    camlist: function camlist(val) {\n      var _this2 = this;\n\n      if (val == true) {\n        // 获取设备列表\n        http.$axios({\n          url: 'device/getDevices',\n          method: \"GET\",\n          params: {\n            \"org_id\": this.$store.state.userorgid //机构ID\n            //\"page\":1,\n            //\"pageSize\":10,\n            //     \"device_type\":1 设备类型\n\n          }\n        }).then(function (res) {\n          // console.log(res.data.data)\n          _this2.cameraList = res.data.data;\n          _this2.camlist = false;\n        });\n      }\n    },\n    ExceptionList: function ExceptionList() {\n      this.$nextTick(function () {\n        var bs = new BScroll('.wrapper', {\n          movable: true,\n          zoom: true,\n          probeType: 2,\n          click: true\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA,2C,CAGA;;AACA;AACA;EACAA,gBADA;EAGAC,IAHA,kBAGA;IACA;MACAC;MACA;QACAC,KADA;QAEAC;MAFA,CADA,CADA;MAOAC,kBAPA;MAOA;MACAC,cARA;MASAC,WATA;MASA;MACAC,WAVA;MAWAC,WAXA;MAYAC,WAZA;MAaAC,cAbA;MAcAC,oBAdA;MAcA;MACAC,cAfA;MAeA;MACAC;IAhBA;EAmBA,CAvBA;EAwBAC;IACAC,YADA;IAEAC,cAFA;IAGAC,UAHA;IAIAC;EAJA,CAxBA;EA8BAC;IACA;IACAC,MAFA,kBAEAC,GAFA,EAEA;MACA;IACA,CAJA;IAMA;IACAC,UAPA,sBAOAC,EAPA,EAOA;MACA;IACA,CATA;IAUA;IACAC,QAXA,sBAWA;MACA;QACA;QACA;MACA;IACA,CAhBA;IAiBA;IACAC,OAlBA,mBAkBAJ,GAlBA,EAkBA;MACA;IACA,CApBA;IAqBAK,OArBA,mBAqBAL,GArBA,EAqBA;MACA;IACA,CAvBA;IAwBAM,OAxBA,mBAwBAN,GAxBA,EAwBA;MACA;IACA,CA1BA;IA2BAO,OA3BA,mBA2BAP,GA3BA,EA2BA;MACA;IACA,CA7BA;IA8BA;IACAQ,MA/BA,kBA+BAR,GA/BA,EA+BA;MACA;IACA,CAjCA,CAmCA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EA7CA,CA9BA;EA+EAS,OA/EA,qBA+EA;IAAA;;IACA;IACA;IACA;IACA;IACA;MACA;MACAC;QACAC,wBADA;QAEAC,aAFA;QAGAC;UAAA;QAAA;MAHA,GAKAC,IALA,CAKA;QACA;QACA;MAEA,CATA,GAUA;MACAJ;QACAC,4CADA;QAEAhC;UACA,SADA;UAEA,sBAFA;UAGA,0BAHA;UAIA;YACA,WACA,kBADA,CADA;YAIA;UAJA;QAJA;MAFA,GAcAmC,IAdA,CAcA;QACA;QACA;MACA,CAjBA,CAXA,EA6BA;MACAJ;QACAC,kBADA;QAEAC,aAFA;QAGAC;UACA;QADA;MAHA,GAMAC,IANA,CAMA;QACA;MACA,CARA,EAQAC,KARA,CAQA;QACA;MACA,CAVA,CA9BA;IAyCA,CA3CA;EA8CA,CAlIA;EAoIA;EACA;EACA;EACA;EACA;EACAC;IACAzB,OADA,mBACA0B,GADA,EACA;MAAA;;MACA;QACA;QACAP;UACAC,wBADA;UAEAC,aAFA;UAGAC;YACA,qCADA,CACA;YACA;YACA;YACA;;UAJA;QAHA,GAUAC,IAVA,CAUA;UACA;UACA;UACA;QACA,CAdA;MAeA;IACA,CApBA;IAsBAtB,aAtBA,2BAsBA;MACA;QACA;UACA0B,aADA;UAEAC,UAFA;UAGAC,YAHA;UAIAC;QAJA;MAMA,CAPA;IAQA;EA/BA;AAzIA","names":["name","data","newsList","id","con","cameraPopup","addshow","pop1","pop2","pop3","pop4","cameraList","device_type_name","camlist","ExceptionList","components","Serch","Camera","Foot","Abnormal","methods","change","res","addnewshow","rq","closeTab","serpop1","serpop2","serpop3","serpop4","updata","created","http","url","method","params","then","catch","watch","val","movable","zoom","probeType","click"],"sourceRoot":"src/views","sources":["HomeView.vue"],"sourcesContent":["<template>\r\n\t\n  <div class=\"home\" @click=\"closeTab\">\r\n\t  <header>\r\n\t\t  <div class=\"home-top\">\r\n\t\t\t   <Serch\r\n\t\t\t\t @addnew='addnewshow'\r\n\t\t\t\t @pop1='serpop1'\r\n\t\t\t\t @pop2='serpop2'\r\n\t\t\t\t @pop3='serpop3'\r\n\t\t\t\t @pop4='serpop4'\r\n\t\t\t\t ref=\"child\"\r\n\t\t\t\t >\r\n\t\t\t\t </Serch>\r\n\t\t\t   <Camera \r\n\t\t\t   @tofa=\"change\" \r\n\t\t\t   @camlist=\"updata\"\r\n\t\t\t   :camera=\"cameraList\" \r\n\t\t\t   :cam=\"camlist\"\r\n\t\t\t   :device_types=\"device_type_name\" >\r\n\t\t\t   </Camera>\r\n\t\t\t   <h4>\r\n\t\t\t\t   <p>\r\n\t\t\t\t\t   <img src=\"@/assets/images/horn.png\" alt=\"\">\r\n\t\t\t\t\t   公告：\r\n\t\t\t\t\t   <span\r\n\t\t\t\t\t   v-for=\"(item,index) in newsList\"\r\n\t\t\t\t\t   :key=\"index\"\r\n\t\t\t\t\t   >\r\n\t\t\t\t\t   {{item.con}}\r\n\t\t\t\t\t   </span>\r\n\t\t\t\t   </p>\r\n\t\t\t   </h4>\r\n\t\t  </div>\r\n\t  </header>\n\t   \r\n\t   <div class=\"suffix\">\r\n\t\t   <div class=\"suffix-title\" >\r\n\t\t\t   <img src=\"@/assets/images/suffix.png\" alt=\"\">\r\n\t\t\t   <span>工控任务</span>\r\n\t\t   </div>\r\n\t\t  <!-- <div class=\"suffix-go\">\r\n\t\t\t\t<img src=\"@/assets/images/Go.png\" alt=\"\">\r\n\t\t   </div> -->\r\n\t   </div>\r\n\t   <section class=\"home-con  wrapper\">\r\n\t\t   <div class=\"clearfix\" :class=\"cameraPopup || pop1 || pop2 || pop3 || pop4? 'zindex':''\">\r\n\t\t\t\t<Abnormal :Exception=\"ExceptionList\"></Abnormal>\r\n\t\t\t</div>\r\n\t   </section>\r\n\t   <Foot></Foot>\r\n  \r\n  </div>\n</template>\n\n<script>\nimport Serch from '@/components/home/Serch.vue'\r\nimport Camera from '@/components/home/Camera.vue'\r\nimport Abnormal from '@/components/home/Abnormal.vue'\r\nimport Foot from '@/components/Foot.vue'\r\nimport '@/assets/prop.css'\r\nimport http from '@/common/api/request.js'\r\n\r\n\r\n//插件\r\nimport BScroll from '@better-scroll/core'\nexport default {\n  name: 'HomeView',\r\n  \r\n  data(){\r\n\t  return {\r\n\t\t  newsList:[  //公告数据\r\n\t\t\t  {\r\n\t\t\t\tid:1,\r\n\t\t\t\tcon:\"微数场新功能即将上线，敬请期待~\",\r\n\t\t\t  }\r\n\t\t  ],\r\n\t\tcameraPopup:false,//监视器蒙尘状态\r\n\t\taddshow:false,\r\n\t\tpop1:false,//serch的pop们\r\n\t\tpop2:false,\r\n\t\tpop3:false,\r\n\t\tpop4:false,\r\n\t\tcameraList:[],\r\n\t\tdevice_type_name:[],//设备类型名称\r\n\t\tcamlist:false,//设备列表是否更新\r\n\t\tExceptionList:[]\r\n\t\t\r\n\t  }\r\n  },\n  components: {\n\tSerch,\r\n\tCamera,\r\n\tFoot,\r\n\tAbnormal\n  },\r\n  methods:{\r\n\t\t// //摄像头蒙尘状态\r\n\t\tchange(res){\r\n\t\t\tthis.cameraPopup=res\r\n\t\t},\r\n\t\t\r\n\t\t// 头部加号状态\r\n\t\taddnewshow(rq){\r\n\t\t\tthis.addshow=rq\r\n\t\t},\r\n\t\t// addList\r\n\t\tcloseTab(){\r\n\t\t\tif(this.addshow){\r\n\t\t\t\tthis.addshow=false;\r\n\t\t\t\tthis.$refs.child.showTab(this.addshow);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//serch的pop们\r\n\t\tserpop1(res){\r\n\t\t\tthis.pop1=res\r\n\t\t},\r\n\t\tserpop2(res){\r\n\t\t\tthis.pop2=res\r\n\t\t},\r\n\t\tserpop3(res){\r\n\t\t\tthis.pop3=res\r\n\t\t},\r\n\t\tserpop4(res){\r\n\t\t\tthis.pop4=res\r\n\t\t},\r\n\t\t// 设备列表是否更新\r\n\t\tupdata(res){\r\n\t\t\tthis.camlist=res\r\n\t\t},\r\n\t\t\r\n\t\t// 连接wasm\r\n\t\t//     chat () {\r\n\t\t//       const that = this\r\n\t\t//       let jrJS = ''\r\n\t\t//       import('@qians/quake_ws_client-wasm/quake_ws_client_wasm.js').then(res => {\r\n\t\t//         jrJS = res.ChatClient\r\n\t\t//         this.ChatClient = jrJS\r\n\t\t//         this.ChatClient.init(sessionStorage.getItem('username'), 'levitas.quakeai.tech:31033', 'PC', true)\r\n\t\t//   \t\tconsole.log(res)\r\n\t\t//       })\r\n\t\t//     },\r\n\t\t\r\n\t\t\r\n  },\r\n  created(){\r\n\t  // import('@qians/quake_ws_client-wasm/quake_ws_client_wasm.js').then(res => {\r\n\t\t //  console.log(res)\r\n\t  //         }),\r\n\t this.$store.commit('USER_ORG_ID',this.$route.query.UserOrgID)\r\n\t this.$nextTick(()=>{\r\n\t\t // 获取设备列表\r\n\t\t    http.$axios({\r\n\t\t \t  url:'device/getDevices',\r\n\t\t \t  method:\"GET\",\r\n\t\t \t  params:{\"org_id\":this.$store.state.userorgid}\r\n\t\t \t  \r\n\t\t   }).then(res=>{\r\n\t\t \t  // console.log(res.data)\r\n\t\t \t  this.cameraList=res.data.data\r\n\t\t \t  \r\n\t\t }),\r\n\t\t // 获取设备类型名称\r\n\t\t http.$axios({\r\n\t\t \turl:'https://1to2to3.cn/rds2/service/query',\r\n\t\t \tdata:{\r\n\t\t \t\t    \"auth\": 2,\r\n\t\t \t\t    \"project\": \"eagle_eye\",\r\n\t\t \t\t    \"table\": \"sys_device_type\",\r\n\t\t \t\t    \"conditions\": {\r\n\t\t \t\t        \"fields\": [\r\n\t\t \t\t            \"device_type_name\"\r\n\t\t \t\t        ],\r\n\t\t \t\t        \"query\": {}\r\n\t\t \t\t    }\r\n\t\t \t\t}\r\n\t\t \t\r\n\t\t }).then(res=>{\r\n\t\t \t// console.log(res.data)\r\n\t\t \tthis.device_type_name=res.data.data\r\n\t\t }),\r\n\t\t // 获取工控服务列表\r\n\t\t http.$axios({\r\n\t\t \turl:'job/getJobs',\r\n\t\t \tmethod:'GET',\r\n\t\t \tparams:{\r\n\t\t \t\t \"org_id\":this.$store.state.userorgid\r\n\t\t \t}\r\n\t\t }).then(res=>{\r\n\t\t \tthis.ExceptionList=res.data.data\r\n\t\t }).catch(()=>{\r\n\t\t\t this.ExceptionList=[]\r\n\t\t })\r\n\t })\r\n\t\t   \r\n\t \r\n  },\r\n \r\n  // mounted() {\r\n\t //  this.$nextTick(()=>{\r\n\t\t//   console.log(this.$store.state.userorgid)\r\n\t //  })\r\n  // },\r\n  watch:{\r\n\t  camlist(val){\r\n\t\t  if(val == true){\r\n\t\t\t  // 获取设备列表\r\n\t\t\t     http.$axios({\r\n\t\t\t  \t  url:'device/getDevices',\r\n\t\t\t  \t  method:\"GET\",\r\n\t\t\t  \t  params:{\r\n\t\t\t  \t    \"org_id\":this.$store.state.userorgid, //机构ID\r\n\t\t\t  \t    //\"page\":1,\r\n\t\t\t  \t    //\"pageSize\":10,\r\n\t\t\t  \t//     \"device_type\":1 设备类型\r\n\t\t\t  \t}\r\n\t\t\t  \t  \r\n\t\t\t    }).then(res=>{\r\n\t\t\t  \t  // console.log(res.data.data)\r\n\t\t\t  \t  this.cameraList=res.data.data\r\n\t\t\t  \t  this.camlist=false\r\n\t\t\t  })\r\n\t\t  }\r\n\t  },\r\n\t  \r\n\t  ExceptionList(){\r\n\t\t  this.$nextTick(()=>{\r\n\t\t  \t\t  let bs = new BScroll('.wrapper', {\r\n\t\t  \t\t\t  movable: true,\r\n\t\t  \t\t\t  zoom: true,\r\n\t\t  \t\t\t  probeType:2,\r\n\t\t  \t\t\t  click:true\r\n\t\t  \t\t  })\r\n\t\t  })\r\n\t  }\r\n\t  \r\n  }\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\t.clearfix{\r\n\t\tdisplay: block;\r\n\t\tcontent: \"\";\r\n\t\tclear: both;\r\n\t\t\r\n\t}\r\n\t.zindex{\r\n\t\ttransform: scale(0) !important;\r\n\t}\r\n\t\r\n\t.home{\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 100vh;\r\n\t\t\toverflow: scroll;\r\n\t\t}\r\n\theader{\r\n\t\theight:6.666667rem;\r\n\t\twidth: 100%;\r\n\t\tdisplay: block;\r\n\t}\r\n\t.home-top{\r\n\t\theight:6.666667rem;\r\n\t\twidth: 100%;\r\n\t\tbackground: #3778DA;\r\n\t\tborder-bottom-left-radius: 0.625rem;\r\n\t\tborder-bottom-right-radius: 0.625rem;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t}\r\n\th4{\r\n\t\twidth:100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\t\r\n\t}\r\n\th4 p{\r\n\t\twidth:8.88rem;\r\n\t\tfont-size:12px;\r\n\t\tcolor: #FFE0A3;\r\n\t\tfont-weight: normal;\r\n\t\tmargin-top: 0.8rem;\r\n\t\tdisplay: flex;\r\n\t}\r\n\th4 img{\r\n\t\tmargin-right: 0.186667rem;\r\n\t}\r\n\tsection{\r\n\t\tflex: 1;\r\n\t\toverflow: hidden;\r\n\t\t/* background-color: aquamarine; */\r\n\t\t\r\n\t}\r\n\t\r\n\t.suffix{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 0.426667rem;\r\n\t\tcolor: #515151;\r\n\t\tmargin: 0.4rem 0;\r\n\t}\r\n\t.suffix-title{\r\n\t\tdisplay: flex;\r\n\t\twidth: 8.88rem;\r\n\t\talign-items: center;\r\n\t\t\r\n\t}\r\n\t.suffix-title img{\r\n\t\twidth: 0.426667rem;\r\n\t\theight: 0.453333rem;\r\n\t\tmargin: right 0.106667rem;\r\n\t}\r\n\t\r\n\t\r\n\t.test{\r\n\t\ttransform: none;\r\n\t}\r\n\t\r\n\t/deep/input[type=\"search\"]{\r\n\t\r\n\t  -webkit-appearance:none !important;\r\n\t\r\n\t  }\r\n\t\r\n\t\r\n</style>\n"]},"metadata":{},"sourceType":"module"}